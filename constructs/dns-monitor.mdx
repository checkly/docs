---
title: 'DnsMonitor Construct'
description: 'Learn how to configure DNS monitors with the Checkly CLI.'
sidebarTitle: 'DNS Monitor'
---

import GeneralMonitorOptionsTable from '/snippets/general-monitor-options-table.mdx';

<Tip>
Learn more about DNS Monitors in [the DNS monitor overview](/detect/uptime-monitoring/dns-monitors/overview).
</Tip>

Use DNS Monitors to verify that DNS records resolve correctly and to track lookup performance over time.

<Accordion title="Prerequisites">
Before creating DNS Monitors, ensure you have:

- An initialized Checkly CLI project
- A domain or hostname you want to monitor
- Basic understanding of DNS record types (A, AAAA, CNAME, MX, NS, TXT, SOA)

For additional setup information, see [CLI overview](/cli/overview).
</Accordion>

<CodeGroup>

```ts Basic Example
import { Frequency, DnsAssertionBuilder, DnsMonitor } from "checkly/constructs"

new DnsMonitor("dns-monitor", {
  name: "DNS A Record Monitor",
  activated: true,
  maxResponseTime: 1000,
  degradedResponseTime: 500,
  frequency: Frequency.EVERY_5M,
  locations: ["us-east-1", "eu-central-1"],
  request: {
    query: "example.com",
    recordType: "A",
    assertions: [
      DnsAssertionBuilder.jsonAnswer("$.Answer[0].data").equals("93.184.216.34")
    ],
  },
})
```

```ts Advanced Example
import { Frequency, DnsAssertionBuilder, DnsMonitor } from "checkly/constructs"

new DnsMonitor("advanced-dns-monitor", {
  name: "Advanced DNS Monitor",
  activated: true,
  frequency: Frequency.EVERY_5M,
  locations: ["us-east-1", "eu-central-1"],
  maxResponseTime: 800,
  degradedResponseTime: 400,
  tags: ["dns", "production", "critical"],
  request: {
    query: "api.example.com",
    recordType: "A",
    nameServer: "9.9.9.9",
    port: 53,
    protocol: "UDP",
    assertions: [
      DnsAssertionBuilder.jsonAnswer("$.Answer[0].TTL").greaterThan(300),
      DnsAssertionBuilder.responseTime().lessThan(500),
      DnsAssertionBuilder.jsonAnswer("$.Answer[0].data").equals("93.184.216.34")
    ],
  },
})
```

</CodeGroup>

## Configuration

A DNS Monitor has its own DNS-specific settings, plus the standard monitor options shared across all check types.

<Tabs>
<Tab title="DNS Monitor Settings">

| Parameter | Type | Required | Default | Description |
|-----------|------|----------|---------|-------------|
| `request` | `object` | ✅ | - | DNS request configuration object |
| `degradedResponseTime` | `number` | ❌ | `500` | Response time threshold in milliseconds for degraded status |
| `maxResponseTime` | `number` | ❌ | `1000` | Maximum response time in milliseconds before marking as failed |

</Tab>
<Tab title="General Monitor Settings">

  <GeneralMonitorOptionsTable />

</Tab>
</Tabs>

### `DnsMonitor` Options

<ResponseField name="request" type="object" required >

DNS request configuration that defines the DNS query to perform and how to validate the response.

**Usage:**

```ts
new DnsMonitor("dns-monitor", {
  request: {
    query: "example.com",
    recordType: "A",
    assertions: [
      DnsAssertionBuilder.jsonAnswer("$.Answer[0].data").equals("93.184.216.34")
    ]
  }
})
```

**Parameters:**

| Parameter | Type | Required | Default | Description |
|-----------|------|----------|---------|-------------|
| `query` | `string` | ✅ | - | The DNS query (domain name or IP address) |
| `recordType` | `DnsRecordType` | ✅ | - | DNS record type: A, AAAA, CNAME, MX, NS, TXT, SOA |
| `nameServer` | `string` | ❌ | - | Custom DNS server to query (e.g. "9.9.9.9") |
| `port` | `number` | ❌ | `53` | Port of the DNS server |
| `protocol` | `DnsProtocol` | ❌ | `UDP` | Protocol to use: UDP or TCP |
| `assertions` | `DnsAssertion[]` | ❌ | `[]` | Response assertions using `DnsAssertionBuilder` |

Define assertions using the `DnsAssertionBuilder` to validate DNS responses:

```ts
DnsAssertionBuilder.responseTime().lessThan(1000)
DnsAssertionBuilder.textAnswer().contains("192.168.1.1")
DnsAssertionBuilder.jsonAnswer("$.Answer[0].data").equals("93.184.216.34")
DnsAssertionBuilder.jsonAnswer("$.Answer.length").greaterThan(0)
```

Learn more in [Assertions](/detect/uptime-monitoring/dns-monitors/configuration#assertions).
</ResponseField>

<ResponseField name="degradedResponseTime" type="number" default="500">
Response time threshold in milliseconds for marking the DNS Monitor as degraded (warning state).

**Usage:**

```ts highlight={3}
new DnsMonitor("dns-performance-tiers", {
  name: "DNS Performance Tiers",
  degradedResponseTime: 300, // Warn at 300ms
  request: {
    query: "example.com",
    recordType: "A",
    assertions: [
      DnsAssertionBuilder.jsonAnswer("$.Answer[0].data").equals("93.184.216.34")
    ],
  },
})
```
</ResponseField>

<ResponseField name="maxResponseTime" type="number" default="1000">
Maximum response time in milliseconds before the DNS Monitor is marked as failed.

**Usage:**

```ts highlight={3}
new DnsMonitor("fast-dns", {
  name: "Fast DNS Resolution",
  maxResponseTime: 500, // Fail at 500ms
  request: {
    query: "fast.example.com",
    recordType: "A",
  },
})
```
</ResponseField>

### General Monitor Options

<ResponseField name="name" type="string" required>
Friendly name for your DNS Monitor that will be displayed in the Checkly dashboard and used in notifications.

**Usage:**

```ts highlight={2}
new DnsMonitor("my-monitor", {
  name: "DNS Resolution Monitor",
  /* More options ... */
})
```

</ResponseField>

<ResponseField name="frequency" type="Frequency">
How often the DNS Monitor should run. Use the `Frequency` enum to set the check interval.

**Usage:**

```ts highlight={2}
new DnsMonitor("my-monitor", {
  frequency: Frequency.EVERY_1M,
  /* More options ... */
})
```

**Available frequencies**: `EVERY_10S`, `EVERY_20S`, `EVERY_30S`, `EVERY_1M`, `EVERY_2M`, `EVERY_5M`, `EVERY_10M`, `EVERY_15M`, `EVERY_30M`, `EVERY_1H`, `EVERY_2H`, `EVERY_3H`, `EVERY_6H`, `EVERY_12H`, `EVERY_24H`
</ResponseField>

<ResponseField name="locations" type="string[]" default="[]">
Array of [public location codes](/concepts/locations/#public-locations) where the DNS Monitor should run from. Multiple locations provide geographic coverage and help detect regional DNS issues.

**Usage:**

```ts highlight={2}
new DnsMonitor("global-dns-monitor", {
  locations: ["us-east-1", "eu-central-1", "ap-southeast-1"]
})
```
</ResponseField>

<ResponseField name="activated" type="boolean" default="true">
Whether the DNS Monitor is enabled and will run according to its schedule.

**Usage:**

```ts highlight={2}
new DnsMonitor("my-monitor", {
  activated: false // Disabled monitor
})
```

</ResponseField>
