---
title: 'Custom Dependencies in Playwright Check Suites'
description: 'Use private packages, custom registries, and additional dependencies in your Playwright Check Suites.'
sidebarTitle: 'Custom Dependencies'
---

Playwright Check Suites let you take your existing Playwright tests and turn them into globally distributed monitoring using the [Checkly CLI](/cli/). It will read your Playwright configuration and parse your existing settings and dependencies to prepare the Checkly monitoring infrastructure.

## Using JavaScript/Node.js dependencies

Whether you use [npm](https://www.npmjs.com/), [yarn](https://yarnpkg.com/), or [pnpm](https://pnpm.io/); Checkly uses your existing `package.json` and lock files to install the correct `devDependencies` and prepare your testing and monitoring environment.

```json
{
  "devDependencies": {
    "@faker-js/faker": "^9.7.0"
  }
}
```

<Note>
By default, the Checkly infrastructure installs dependencies via npm.
</Note>

However, if an alternative lock file (`pnpm-lock.json` or `yarn.lock`) is discovered, Checkly uses the matching package manager to install the project dependencies.

| Available lock file | Package manager |
|---------------------|-----------------|
| `package-lock.json` | npm             |
| `pnpm-lock.json`    | pnpm            |
| `yarn.lock`         | yarn            |

<Warning>
**For `pnpm` users:** if you define the same dependency in `dependencies` and `devDependencies`, please use a custom `installCommand` in your `checkly.config.ts|js` to ensure all required dependenies are installed: `pnpm install`
</Warning>

## Using private dependencies

There are no dependency changes required if you rely on private packages or a custom package registry. The Checkly CLI detects your existing private `package.json` dependencies and installs those using the credentials provided.

```json
{
  "devDependencies": {
    "@your-org/private-package": "^2.3.0"
  }
}
```


Regardless of whether you use private packages or a custom registry, the Checkly infrastructure needs to authenticate with your provider to `install` your private source code.

For example, if you use npm to manage your private dependencies, you need to:

- **add custom npm configuration** to your project.
- **include custom configuration files** in your Checkly project to make the infrastructure aware.

### Configuration files for private packages

Package managers use configuration files to authenticate with private registries. All supported package managers (npm, yarn, pnpm) can use `.npmrc` for authentication:

<Note>
To avoid putting sensitive information into configuration files, set authentication tokens via Checkly [environment secrets](/platform/variables). Reference them using `${VARIABLE_NAME}` syntax in your configuration files.
</Note>

#### Using private npm packages

```txt
# Hard-coded authentication token
//registry.npmjs.org/:_authToken=npm_abc...

# Authentication token defined in environment variables
//registry.npmjs.org/:_authToken=${NPM_TOKEN}
```

#### Using JFrog Artifactory

```txt
# Custom registry URL with hard-coded authentication token
registry=https://yourcompany.jfrog.io/artifactory/api/npm/yourcompany.jfrog.io/artifactory/api/npm/npm-local/:_authToken=abc...

# Custom registry URL with authentication token defined in environment variables
registry=https://yourcompany.jfrog.io/artifactory/api/npm/yourcompany.jfrog.io/artifactory/api/npm/npm-local/:_authToken=${ARTIFACTORY_TOKEN}
```

#### Using GitHub Packages

```txt
# Authentication token defined in environment variables
//npm.pkg.github.com/:_authToken=${GITHUB_TOKEN}
@your-org:registry=https://npm.pkg.github.com
```

### Using yarn or pnpm with private packages

Both **yarn** and **pnpm** support `.npmrc` for authentication (same format as npm examples above). Checkly automatically detects your package manager based on the lock file present and uses the `.npmrc` configuration for authentication.

### Include custom configuration files

To make the Checkly CLI and infrastructure aware of your configuration for private packages, specify the additional files in the `checks.include` property in your `checkly.config.ts`.

Checkly CLI commands like `test` or `deploy` will bundle and upload these files so they are available in the Checkly infrastructure when running essential commands like `install`; making sure your private dependencies are installed.

```typescript checkly.config.ts
export default defineConfig({
  checks: {
    playwrightConfigPath: './playwright.config.ts',
    // Include .npmrc for authentication with private registries
    // Works with npm, yarn, and pnpm
    include: ['.npmrc'],
    playwrightChecks: [
      // Configure your Playwright Check Suites
      // ...
    ]
  }
})
```

## Troubleshooting

### Package not found

If you see errors like `404 Not Found` or `Package '@your-org/package' not found`:

- Verify your `.npmrc` file is included in `checks.include`
- Check that the registry URL is correct
- Ensure your package name matches exactly (including scope)

### Authentication failed

If you see `401 Unauthorized` or `403 Forbidden` errors:

- Verify the environment secret is set in Checkly (check [environment variables](/platform/variables) for details)
- Ensure the variable name in your config file matches exactly (e.g., `${NPM_TOKEN}`)
- Check that your token has the necessary permissions to access the package

### Wrong package manager detected

If Checkly uses the wrong package manager:

- Verify the correct lock file is present (`package-lock.json`, `yarn.lock`, or `pnpm-lock.json`)
- Remove any conflicting lock files
- If needed, override with a custom `installCommand` in your [Playwright Check Suite configuration](/detect/synthetic-monitoring/playwright-checks/configuration)

### Installation timeout

If package installation exceeds time limits:

- Check for large dependencies that can be optimized
- Consider using a custom `installCommand` to install only required packages
